@model IndexViewModel
@{
    ViewData["Title"] = "Personal profile";
    Layout = "_ProfileLayout";
}

@if (TempData["EditSuccess"] != null)
{
    <div class="alert alert-success">
        @TempData["EditSuccess"]
    </div>
}

<style>
    .user-avt{
        max-width:82px;
        border-radius: 15px;
        border: 3px solid #ffc8c8;
        margin: 7px 3px -11px 3px;
    }
</style>

@*<div id="chat">
    <div id="messages"></div>

    <form method="post" action="/message/sendmessage">
        <input type="hidden" name="userId" value="@Model.profile.Id" />
        <input type="text" name="message" />
        <button type="submit">Send</button>
    </form>
</div>*@

    <div class="row">
        <div class="col-lg-10 margin-bottom-40px">
            <div class="box-shadow border-radius-10 overflow-hidden">
                <div class="padding-30px background-white">
                    
                    <h2>@ViewData["Title"]</h2>
                   
                        <div class="form-group label-floating">
                            <div>
                            
                          
                            @if (Model.profile.Img != null)
                            {
                            <div class="thum hvr-float" style="width: 100%; height: 140px;">
                                <img src="@Model.profile.Img" class="user-avt" style="object-fit: cover; width: 100%; height: 100%;">
                            </div>
                             }
                            else
                            {
                                <img src="~/assets/img/chef-avt-default.png" class="user-avt" style="">
                            }
                        </div>
                            <br>

                    <form id="profile-form" asp-controller="Manage" asp-action="UploadImgAvatar" method="post" enctype="multipart/form-data">
                        <input type="file" name="files" multiple />
                        <button type="submit">Upload Avatar</button>
                    </form>
                       

                        </div>
                <form id="profile-form" asp-controller="Manage" asp-action="EditProfile" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <div class="form-group label-floating">
                            <label asp-for="profile.Username" class="control-label"></label>
                            <input asp-for="profile.Username" class="form-control" disabled />
                        </div>

                        @*<div class="form-group label-floating">
                        <label asp-for="Email" class="control-label"></label>
                        <input asp-for="Email" class="form-control" disabled />
                        </div>*@

                        <div class="form-group label-floating">
                            <label asp-for="profile.FirstName" class="control-label"></label>
                            <input asp-for="profile.FirstName" class="form-control" />
                            <span asp-validation-for="profile.FirstName" class="text-danger"></span>
                        </div>

                        <div class="form-group label-floating">
                            <label asp-for="profile.LastName" class="control-label"></label>
                            <input asp-for="profile.LastName" class="form-control" />
                            <span asp-validation-for="profile.LastName" class="text-danger"></span>
                        </div>

                        <div class="form-group label-floating">
                            <label asp-for="profile.Birthday" class="control-label"></label>
                            <input asp-for="profile.Birthday" class="form-control" type="date" pattern="\d{1,2}/\d{1,2}/\d{4}" placeholder="mm/dd/yyyy" />
                            <span asp-validation-for="profile.Birthday" class="text-danger"></span>
                        </div>

                        <button id="update-profile-button" type="submit" class="btn full-width background-main-color text-white">Save Changes</button>

                    </form>
                </div>
            </div>
        </div>

    </div>

    @*<h4>Cập nhật thông tin tài khoản</h4>
    <hr />
    <dl class="row">


        <dt class="col-sm-4">Số điện thoại:</dt>
        <dd class = "col-sm-6">
            <p>
                Số điện thoại dùng để xác thực hai yêu tố
            </p>
            @(Model.PhoneNumber ?? "không có")
                @if (Model.PhoneNumber != null)
                {
                    <text>:</text>
                    <text>&nbsp;&nbsp;<a asp-controller="Manage" asp-action="AddPhoneNumber">Thay đổi</a>&nbsp;&nbsp;</text>
                    <form asp-controller="Manage" asp-action="RemovePhoneNumber" method="post" role="form">
                        <button type="submit" class="btn btn-danger btn-sm">Loại bỏ số điện thoại</button>
                    </form>
                }
                else
                {
                    <text>&nbsp;&nbsp;<a asp-controller="Manage" asp-action="AddPhoneNumber">Thêm số điện thoại</a></text>
                }
        </dd>

        <dt class="col-sm-4">Xác thực hai yếu tố:</dt>
        <dd class = "col-sm-6">
            <!--<p>
                There are no two-factor authentication providers configured. See <a href="http://go.microsoft.com/fwlink/?LinkID=532713">this article</a>
                for setting up this application to support two-factor authentication.
            </p>-->
            @if (Model.TwoFactor)
                {
                    <form asp-controller="Manage" asp-action="DisableTwoFactorAuthentication" method="post" class="form-horizontal" role="form">
                        (Đang kích hoạt) <button type="submit" class="btn btn-danger btn-sm">Hủy</button>
                    </form>
                }
                else
                {
                    <form asp-controller="Manage" asp-action="EnableTwoFactorAuthentication" method="post" class="form-horizontal" role="form">
                        <button type="submit" class="btn btn-primary btn-sm">Kích hoạt</button>
                    </form>
                }
        </dd>

        <dt class="col-sm-4">Xác thực ứng dụng:</dt>
        <dd class = "col-sm-6">
            @if (Model.AuthenticatorKey == null)
            {
                <form asp-controller="Manage" asp-action="ResetAuthenticatorKey" method="post" class="form-horizontal" role="form">
                    <button type="submit" class="btn btn-sm btn-primary">Phát sinh mã</button>
                </form>
            }
            else
            {
                <text>Mã xác thực là: @Model.AuthenticatorKey</text>
                <p>Nhập mã này khi yêu cầu xác thực 2 yếu tố</p>
                <form asp-controller="Manage" asp-action="GenerateRecoveryCode" method="post" class="form-horizontal" role="form">
                   <button type="submit" class="btn btn-sm btn-primary">Phát sinh mã phục hồi</button>
                   <p>Mã phục hồi sử dụng để xác thực hai yếu tố</p>
                </form>
            }
        </dd>
    </dl>*@